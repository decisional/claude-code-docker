#!/bin/bash
# Remove a Claude Code instance
# Usage: ./cc-rm [instance-name]

set -e

if [ -z "$1" ]; then
    echo "Usage: ./cc-rm <instance-name>"
    echo ""
    echo "Available instances:"
    docker ps -a --filter "name=claude-" --format "  - {{.Names}}" | sed 's/-claude-code-1//' | sed 's/claude-//'
    exit 1
fi

INSTANCE_NAME="$1"
PROJECT_NAME="claude-${INSTANCE_NAME}"

echo "ðŸ—‘ï¸  Removing Claude Code instance: $INSTANCE_NAME"
docker-compose -p "$PROJECT_NAME" down
NETWORK_NAME="${PROJECT_NAME}_default"
docker network rm "$NETWORK_NAME" 2>/dev/null && echo "âœ“ Network removed: $NETWORK_NAME" || true
echo "âœ“ Instance removed"
