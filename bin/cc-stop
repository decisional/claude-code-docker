#!/bin/bash
# Stop a Claude Code instance
# Usage: cc-stop [instance-name]

set -e

# Source config functions
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
source "$SCRIPT_DIR/../lib/config-functions.sh"

if [ -z "$1" ]; then
    echo "Usage: cc-stop <instance-name>"
    echo ""
    echo "Available instances:"
    docker ps --filter "name=claude-" --format "  - {{.Names}}" | sed 's/-claude-code-1//' | sed 's/claude-//'
    exit 1
fi

INSTANCE_NAME=$(get_instance_name "$1")
PROJECT_NAME="claude-${INSTANCE_NAME}"

echo "ðŸ›‘ Stopping Claude Code instance: $INSTANCE_NAME"
docker-compose -f "$LIB_DIR/docker-compose.yml" -p "$PROJECT_NAME" stop
echo "âœ“ Instance stopped"
